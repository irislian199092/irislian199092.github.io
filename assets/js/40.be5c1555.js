(window.webpackJsonp=window.webpackJsonp||[]).push([[40,63,64],{244:function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="1c25")}({"1c25":function(t,e,r){"use strict";var n;(r.r(e),"undefined"!=typeof window)&&(r("4141"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(r.p=n[1]));var a=r("3458"),i=r.n(a),s=r("1d41"),o=r.n(s);var c=function(t,e,r,n,a,i,s,o){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}({name:"AnswerResult",props:{configData:Object},computed:{boxClientRect(){const{width:t="100%",height:e="100%",background:r="transparent"}=this.configData;return{width:t,height:e,background:r}},innerBoxClientRect(){const{innerWidth:t="60%",innerHeight:e="70%"}=this.configData;return{width:t,height:e}}},components:{TButton:i.a,SvgIcon:o.a},methods:{handleClose(){this.$emit("handleClose")}}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"answer-result-container",style:t.boxClientRect},[r("div",{staticClass:"answer-result-box",style:t.innerBoxClientRect},[t._l(t.configData.result,(function(e,n){return r("div",{key:n,staticClass:"answer-bar-item"},[e.topTitle?r("div",{staticClass:"top-title"},[r("span",[t._v(t._s(e.topTitle))])]):t._e(),r("div",{staticClass:"answer-bar"},[r("div",{staticClass:"answer-bar-inner",style:"height: "+e.percentage+"%; background: "+(t.configData.barColor||"#F85415")})]),e.bottomTitle?r("div",{staticClass:"bottom-title"},[r("span",[t._v(t._s(e.bottomTitle))])]):t._e(),e.icon?r("SvgIcon",{attrs:{iconClass:e.icon,className:"expressive-icon"}}):t._e()],1)})),t.configData.showClose?r("TButton",{staticClass:"close-btn",attrs:{type:"text",icon:"close",flat:""},on:{click:t.handleClose}}):t._e()],2)])}),[],!1,null,null,null).exports;c.install=function(t){t.component(c.name,c)};var u=c;e.default=u},"1d41":function(t,e){t.exports=r(222)},3458:function(t,e){t.exports=r(205)},4141:function(t,e){!function(t){var e=t.getElementsByTagName("script");"currentScript"in t||Object.defineProperty(t,"currentScript",{get:function(){try{throw new Error}catch(n){var t,r=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in e)if(e[t].src==r||"interactive"==e[t].readyState)return e[t];return null}}})}(document)}})},286:function(t,e){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="1c25")}({"1c25":function(t,e,r){"use strict";var n;(r.r(e),"undefined"!=typeof window)&&(r("4141"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(r.p=n[1]));function a(t,e,r,n,a,i,s,o){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}var i=a({name:"BarrageMsg",props:{role:{type:Number,default:2},uid:{type:Number,default:0},playingStudentId:{type:Number,default:0},barrageInfo:{type:Object,default:()=>({})},disabledPlayStatus:{type:Boolean,default:!0},barrageScrollStatus:{type:Boolean,default:!0}},data:()=>({}),mounted(){this.barrageInfo.width=this.$refs.barrageMsg.getBoundingClientRect().width},computed:{isPlaying(){return!!this.playingStudentId},styleObject(){const{x:t,sn:e}=this.barrageInfo;return{transform:`translate3d(${t}px, ${e%2*50}px, 0)`}},isOwn(){return this.uid===this.barrageInfo.id}},methods:{handleMouseenter(){1===this.role&&this.barrageScrollStatus&&!this.isPlaying&&this.$emit("changeBarrageScrollStatus",!1)},handleMouseleave(){1!==this.role||this.barrageScrollStatus||this.isPlaying||this.$emit("changeBarrageScrollStatus",!0)},handlePlay(){1!==this.role||this.disabledPlayStatus||(this.$emit("changePlayingStudentId",this.barrageInfo.id),setTimeout(()=>{this.$emit("changePlayingStudentId",0),this.$emit("changeBarrageScrollStatus",!0)},2e3))}}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"barrageMsg",staticClass:"barrage-msg-container",class:{own:t.isOwn},style:t.styleObject,on:{click:t.handlePlay,mouseenter:t.handleMouseenter,mouseleave:t.handleMouseleave}},[r("div",{staticClass:"barrage-msg-con"},[r("div",[t._v(t._s(t.isPlaying)+"-"+t._s(t.barrageInfo.id))])])])}),[],!1,null,null,null).exports,s=a({name:"Barrage",props:{disabledPlayStatus:{type:Boolean,default:!0},barrageMsgStatus:{type:Boolean,default:!1},role:{type:Number,default:2},uid:{type:Number,default:0},playingStudentId:{type:Number,default:0},barrageList:{type:Array,default:()=>[]},barrageScrollStatus:{type:Boolean,default:!0}},data:()=>({barrageListData:[],boxRect:{},timers:[],duration:10,sn:0,currentSn:0}),created(){this.formatBarrageList(this.barrageList)},mounted(){this.boxRect=this.getBoxRect(),this.generatedTimers(this.barrageListData)},components:{BarrageMsg:i},methods:{getBoxRect(){const{width:t,height:e}=this.$refs.stage.getBoundingClientRect();return{width:t,height:e}},runTimers(){const t=e=>{this.timers[e]&&this.timers[e].timer().then(()=>{++this.currentSn,t(++e)})};t(this.currentSn)},generatedTimers(t){const e=[],{width:r}=this.boxRect;t.forEach((t,n)=>{this.timers.includes(t)||(t.sn=this.sn++,t.timer=()=>new Promise((e,n)=>{let a=null,i=!0;const s=n=>{if(t.time&&n===t.time)return!1;t.time=n,t.preTime=t.preTime||t.time;const o=t.time-t.preTime;if(t.preTime=n,t.width&&r&&this.barrageScrollStatus&&this.barrageMsgStatus){const n=100,c=r+t.width+n,u=t.width+n,l=(c/(1e3*this.duration)*o).toFixed(2);if(t.x-=l,i&&(t.x<-c||t.x<-u)&&(i=!1,e(t.x)),t.x<-c)return a&&cancelAnimationFrame(a),!1;a=requestAnimationFrame(s)}else a=requestAnimationFrame(s)};a=requestAnimationFrame(s)}),e.push(t))}),this.timers.splice(this.timers.length,0,...e)},formatBarrageList(t=[]){const e=[];t.forEach(t=>{this.barrageListData.includes(t)||(this.$set(t,"x",0),e.push(t))}),this.barrageListData.splice(this.barrageListData.length,0,...e)},changeBarrageScrollStatus(t){this.$emit("changeBarrageScrollStatus",t)},changePlayingStudentId(t){this.$emit("changePlayingStudentId",t)}},watch:{barrageList(t){this.formatBarrageList(t)},barrageListData(t){this.generatedTimers(t)},timers(){this.barrageMsgStatus&&this.runTimers()},barrageMsgStatus(t){!this.currentSn&&t&&this.runTimers()}}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"stage",staticClass:"barrage-container"},[t.barrageMsgStatus?t._l(t.barrageListData,(function(e){return r("BarrageMsg",{key:e.id,attrs:{barrageInfo:e,role:t.role,uid:t.uid,playingStudentId:t.playingStudentId,barrageScrollStatus:t.barrageScrollStatus,disabledPlayStatus:t.disabledPlayStatus},on:{changeBarrageScrollStatus:t.changeBarrageScrollStatus,changePlayingStudentId:t.changePlayingStudentId}})})):t._e()],2)}),[],!1,null,null,null).exports;s.install=function(t){t.component(s.name,s)};var o=s;e.default=o},4141:function(t,e){!function(t){var e=t.getElementsByTagName("script");"currentScript"in t||Object.defineProperty(t,"currentScript",{get:function(){try{throw new Error}catch(n){var t,r=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in e)if(e[t].src==r||"interactive"==e[t].readyState)return e[t];return null}}})}(document)}})},451:function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="1c25")}({"1c25":function(t,e,r){"use strict";var n;(r.r(e),"undefined"!=typeof window)&&(r("4141"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(r.p=n[1]));var a=r("7ff2"),i=r.n(a),s=r("c4ce"),o=r.n(s),c=r("ccd7"),u=r.n(c),l=r("75e6"),d=r("3458"),g=r.n(d);const f={innerHeight:"60%",innerWidth:"40%",result:[{percentage:0,topTitle:"0%",icon:"iperfect"},{percentage:0,topTitle:"0%",icon:"igood"},{percentage:0,topTitle:"0%",icon:"ibad"}]};var p=function(t,e,r,n,a,i,s,o){var c,u="function"==typeof t?t.options:t;if(e&&(u.render=e,u.staticRenderFns=r,u._compiled=!0),n&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},u._ssrRegister=c):a&&(c=o?function(){a.call(this,this.$root.$options.shadowRoot)}:a),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(t,e){return c.call(e),l(t,e)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:u}}({name:"VoiceAnswerPanel",mixins:[i.a.mixins],props:{seconds:{type:Number,default:0},configData:{type:Object,default:()=>({})},barrageList:{type:Array,default:()=>[]},uid:{type:Number,default:0}},data:()=>({barrageMsgStatus:!1,timeProgressStatus:!0,barrageScrollStatus:!0,playingStudentId:0}),computed:{configVoiceData(){return Object.assign({},f,this.configData)},barrageBtnTxt(){return this.t(`ui.voiceAnswer.${["openBarrage","closeBarrage"][+this.barrageMsgStatus]}`)}},components:{Barrage:o.a,AnswerResult:u.a,TimeProgress:l.TimeProgress,TButton:g.a},methods:{handleEnd(){this.timeProgressStatus=!1,this.$emit("progressComplete")},switchBarrageStatus(){this.barrageMsgStatus=!this.barrageMsgStatus,this.$emit("changeBarrageMsgStatus",this.barrageMsgStatus)},handleClose(){this.$emit("close")},changeBarrageScrollStatus(t){this.barrageScrollStatus=t,this.$emit("changeBarrageScrollStatus",t)},changePlayingStudentId(t){this.playingStudentId=t,this.$emit("changePlayingStudentId",t)}}},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"voice-answer-panel-container"},[r("div",{staticClass:"barrage-wraper"},[r("Barrage",{attrs:{disabledPlayStatus:t.timeProgressStatus,role:1,uid:t.uid,playingStudentId:t.playingStudentId,barrageMsgStatus:t.barrageMsgStatus,barrageList:t.barrageList,barrageScrollStatus:t.barrageScrollStatus},on:{changeBarrageScrollStatus:t.changeBarrageScrollStatus,changePlayingStudentId:t.changePlayingStudentId}})],1),r("div",{staticClass:"voice-anser-con"},[t.timeProgressStatus?r("TimeProgress",{attrs:{title:t.t("ui.voiceAnswer.waitAnswering"),seconds:t.seconds},on:{end:t.handleEnd}}):r("AnswerResult",{attrs:{configData:t.configVoiceData}})],1),r("div",{staticClass:"voice-anser-footer"},[r("TButton",{staticClass:"switch-barragebtn",attrs:{type:"info"},on:{click:t.switchBarrageStatus}},[t._v(t._s(t.barrageBtnTxt))]),t.timeProgressStatus?t._e():r("TButton",{attrs:{flat:"",type:"text",icon:"close"},on:{click:t.handleClose}})],1)])}),[],!1,null,null,null).exports;p.install=function(t){t.component(p.name,p)};var h=p;e.default=h},3458:function(t,e){t.exports=r(205)},4141:function(t,e){!function(t){var e=t.getElementsByTagName("script");"currentScript"in t||Object.defineProperty(t,"currentScript",{get:function(){try{throw new Error}catch(n){var t,r=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in e)if(e[t].src==r||"interactive"==e[t].readyState)return e[t];return null}}})}(document)},"75e6":function(t,e){t.exports=r(282)},"7ff2":function(t,e){t.exports=r(202)},c4ce:function(t,e){t.exports=r(286)},ccd7:function(t,e){t.exports=r(244)}})}}]);