(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{316:function(t,e){t.exports=function(t){var e={};function n(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="1c25")}({"1c25":function(t,e,n){"use strict";var a;(n.r(e),"undefined"!=typeof window)&&(n("4141"),(a=window.document.currentScript)&&(a=a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(n.p=a[1]));var i=function(t,e,n,a,i,o,s,r){var u,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),a&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=u):i&&(u=r?function(){i.call(this,this.$root.$options.shadowRoot)}:i),u)if(c.functional){c._injectStyles=u;var l=c.render;c.render=function(t,e){return u.call(e),l(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,u):[u]}return{exports:t,options:c}}({name:"SoundWaves",model:{prop:"play",event:"change"},props:{audiooutputId:{type:String,default:"default"},play:{type:Boolean,default:!1},controls:{type:Boolean,default:!1},width:{type:Number,default:300},height:{type:Number,default:256}},data:()=>({soundSrc:"https://s.vipkidresource.com/fe-static/squirrel/dist/static/media/music.2bcaab3.mp3",audioEl:null,canvasEl:null,audioContext:null,audioContextAnalyser:null,space:.5,raf:0,fft:512}),computed:{scale(){return this.height/(this.fft/2)}},mounted(){this.audioEl=this.$refs.audio,this.canvasEl=this.$refs.canvas,this.play&&this.audiooutputId&&this.playOrPauseDemo(this.play)},methods:{onended(){this.destroyData(),this.$emit("onended")},onplay(){this.$emit("change",!0)},onpause(){this.$emit("change",!1)},destroyData(){this.destoryCanvas(),this.raf&&window.cancelAnimationFrame(this.raf)},async playOrPauseDemo(t){t?(await this.playAudio(),this.audioEl.play()):(await this.audioEl.pause(),await this.destroyData())},destoryCanvas(){if(!this.canvasCtx)return;const t=this.canvasEl.width,e=this.canvasEl.height;this.canvasCtx.fillStyle="white",this.canvasCtx.fillRect(0,0,t,e)},initAudioContextAnalyser(){const t=window.AudioContext||window.webkitAudioContext;this.audioContext=new t;const e=this.audioContext.createMediaElementSource(this.audioEl);this.audioContextAnalyser=this.audioContext.createAnalyser();const n=this.audioContext.destination;e.connect(this.audioContextAnalyser),this.audioContextAnalyser.connect(n),this.audioContextAnalyser.fftSize=this.fft},playAudio(){this.audioContextAnalyser||this.initAudioContextAnalyser();const t=this.audioContextAnalyser.frequencyBinCount/2,e=new Uint8Array(t),n=this.canvasEl.width,a=this.canvasEl.height,i=(n+this.space)/t-this.space;let o,s;this.canvasCtx=this.canvasEl.getContext("2d");const r=()=>{s=0,this.audioContextAnalyser.getByteFrequencyData(e),this.canvasCtx.fillStyle="white",this.canvasCtx.fillRect(0,0,n,a);for(let n=0;n<t;n++){o=e[n]*this.scale;const t=this.canvasCtx.createLinearGradient(0,0,0,a);t.addColorStop(0,"rgb(0,153,68)"),t.addColorStop(1,"rgb(74,201,70)"),this.canvasCtx.fillStyle=t,this.canvasCtx.fillRect(s,a-o,i,o),s+=i+this.space}this.raf=requestAnimationFrame(r)};this.raf=requestAnimationFrame(r)}},beforeDestroy(){this.destroyData()},watch:{play(t,e){t!==e&&this.audiooutputId&&this.playOrPauseDemo(t)},audiooutputId(t,e){t!==e&&(this.audioEl.setSinkId(t).catch(console.error),this.playOrPauseDemo(this.play))}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sound-waves-box",style:{width:t.width+"px"}},[n("audio",{ref:"audio",attrs:{controls:t.controls,crossorigin:"anonymous",src:t.soundSrc},on:{play:t.onplay,pause:t.onpause,ended:t.onended}}),n("div",[n("canvas",{ref:"canvas",staticClass:"analyser",attrs:{width:t.width,height:t.height}})])])}),[],!1,null,null,null).exports;i.install=function(t){t.component(i.name,i)};var o=i;e.default=o},4141:function(t,e){!function(t){var e=t.getElementsByTagName("script");"currentScript"in t||Object.defineProperty(t,"currentScript",{get:function(){try{throw new Error}catch(a){var t,n=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(a.stack)||[!1])[1];for(t in e)if(e[t].src==n||"interactive"==e[t].readyState)return e[t];return null}}})}(document)}})}}]);